ORIG_PN="pycrypto"
inherit distutils

DESCRIPTION="Python cryptographic algorithms and protocols module"
HOMEPAGE="http://www.amk.ca/python/code/crypto"
SRC_URI="http://www.amk.ca/files/python/crypto/${ORIG_PN}-${PV}.tar.gz"
PATCH_URI="
	mirror://portage/dev-python/pycrypto/files/pycrypto-${PV}-sha256.patch
	mirror://portage/dev-python/pycrypto/files/pycrypto-${PV}-sha256-2.patch
	mirror://portage/dev-python/pycrypto/files/pycrypto-${PV}-gmp.patch
	mirror://portage/dev-python/pycrypto/files/pycrypto-${PV}-uint32.patch
	mirror://portage/dev-python/pycrypto/files/pycrypto-${PV}-2.6_hashlib.patch
	mirror://portage/dev-python/pycrypto/files/pycrypto-${PV}-CVE-2009-0544.patch
"

export USE_GMP=1

# Gentoo ebuild:
# sha256 hashes occasionally trigger ssp when built with
# -finline-functions (implied by -O3).
CFLAGS+=" -fno-inline-functions"
